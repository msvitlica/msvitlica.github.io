<!DOCTYPE html>
<html lang="sr">
<head>
  <meta charset="UTF-8">
  <title>Biologija igra ‚Äì Biljna tkiva i korijen</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <style>
    :root {
      --green-main: #2e8b57;
      --green-light: #e6f6ec;
      --red: #e63946;
      --yellow: #ffb703;
      --bg: #f5f7fb;
    }

    * {
      box-sizing: border-box;
    }

    body {
      margin: 0;
      font-family: Arial, sans-serif;
      background: var(--bg);
      color: #222;
    }

    header {
      background: var(--green-main);
      color: #fff;
      padding: 20px;
      text-align: center;
    }

    header h1 {
      margin: 0 0 5px;
    }

    header p {
      margin: 0;
      opacity: 0.9;
    }

    main {
      max-width: 900px;
      margin: 20px auto 40px;
      padding: 20px;
    }

    .game-card {
      background: #fff;
      border-radius: 16px;
      box-shadow: 0 4px 10px rgba(0,0,0,0.08);
      padding: 20px 20px 24px;
    }

    .top-bar {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 16px;
      gap: 12px;
      flex-wrap: wrap;
    }

    .xp-wrapper {
      flex: 1;
      min-width: 200px;
    }

    .xp-label {
      font-size: 0.9rem;
      margin-bottom: 4px;
      display: flex;
      justify-content: space-between;
    }

    .xp-bar {
      width: 100%;
      height: 10px;
      border-radius: 999px;
      background: #dde5f5;
      overflow: hidden;
    }

    .xp-fill {
      height: 100%;
      width: 0%;
      background: linear-gradient(90deg, #8dd17e, #2e8b57);
      transition: width 0.3s ease;
    }

    .hearts {
      font-size: 1.5rem;
      min-width: 110px;
      text-align: right;
    }

    .heart-lost {
      opacity: 0.25;
    }

    .question-counter {
      font-size: 0.9rem;
      margin-bottom: 8px;
      color: #555;
    }

    .question-text {
      font-size: 1.1rem;
      margin-bottom: 14px;
    }

    .options {
      display: grid;
      gap: 10px;
      margin-bottom: 16px;
    }

    .option-btn {
      border-radius: 999px;
      border: 2px solid #d0ddf3;
      background: #fff;
      padding: 10px 14px;
      font-size: 0.98rem;
      text-align: left;
      cursor: pointer;
      transition: background 0.2s, border-color 0.2s, transform 0.05s;
    }

    .option-btn:hover {
      transform: translateY(-1px);
      border-color: var(--green-main);
    }

    .option-btn.correct {
      background: var(--green-light);
      border-color: var(--green-main);
      font-weight: bold;
    }

    .option-btn.incorrect {
      background: #ffe5e8;
      border-color: var(--red);
    }

    .option-btn.disabled {
      pointer-events: none;
      opacity: 0.9;
    }

    .feedback {
      min-height: 40px;
      font-size: 0.95rem;
      display: flex;
      align-items: center;
    }

    .feedback.correct {
      color: var(--green-main);
    }

    .feedback.incorrect {
      color: var(--red);
    }

    .bottom-bar {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-top: 8px;
      flex-wrap: wrap;
      gap: 8px;
    }

    .score-label {
      font-size: 0.95rem;
    }

    .primary-btn {
      background: var(--yellow);
      border: none;
      border-radius: 999px;
      padding: 10px 18px;
      font-size: 1rem;
      cursor: pointer;
      font-weight: bold;
    }

    .primary-btn:disabled {
      opacity: 0.5;
      cursor: default;
    }

    .final-screen {
      margin-top: 20px;
      padding: 16px 18px;
      border-radius: 12px;
      background: #fff;
      box-shadow: 0 2px 8px rgba(0,0,0,0.06);
      display: none;
    }

    .final-screen h2 {
      margin-top: 0;
    }

    .tag {
      display: inline-block;
      padding: 4px 10px;
      border-radius: 999px;
      background: #e7f2ff;
      font-size: 0.85rem;
      margin-right: 6px;
      margin-bottom: 4px;
    }

    @media (max-width: 600px) {
      main {
        padding: 10px;
      }
      .game-card {
        padding: 16px 14px 18px;
      }
    }
  </style>
</head>
<body>
<header>
  <h1>Biljna tkiva i korijen ‚Äì mini igra</h1>
  <p>Duolingo stil: skupljaj XP, ƒçuvaj srca i savladaj lekciju!</p>
</header>

<main>
  <div class="game-card">
    <div class="top-bar">
      <div class="xp-wrapper">
        <div class="xp-label">
          <span>XP: <span id="xp-value">0</span></span>
          <span>Pitanje <span id="q-index">1</span>/<span id="q-total">0</span></span>
        </div>
        <div class="xp-bar">
          <div class="xp-fill" id="xp-fill"></div>
        </div>
      </div>
      <div class="hearts" id="hearts">
        ‚ù§Ô∏è ‚ù§Ô∏è ‚ù§Ô∏è
      </div>
    </div>

    <div class="question-counter" id="section-label"></div>
    <div class="question-text" id="question-text"></div>
    <div class="options" id="options"></div>
    <div class="feedback" id="feedback"></div>

    <div class="bottom-bar">
      <div class="score-label">
        Trenutni rezultat: <strong><span id="score">0</span></strong>
      </div>
      <button class="primary-btn" id="next-btn" disabled>Sljedeƒáe ‚ûú</button>
    </div>
  </div>

  <div class="final-screen" id="final-screen">
    <h2>üéâ Kraj lekcije!</h2>
    <p>Osvojio/la si ukupno <strong><span id="final-score"></span></strong> poena i <strong><span id="final-xp"></span> XP</strong>.</p>
    <p id="final-message"></p>
    <p>
      <span class="tag">Biljna tkiva</span>
      <span class="tag">Biljni organi</span>
      <span class="tag">Korijen</span>
      <span class="tag">Tipovi korijena</span>
    </p>
    <button class="primary-btn" onclick="restartGame()">Igraj ponovo üîÅ</button>
  </div>
</main>

<script>
  const questions = [
    {
      section: "Biljna tkiva",
      text: "Kako se zovu tkiva ƒçije se ƒáelije stalno dijele i omoguƒáavaju rast biljke u visinu i du≈æinu?",
      options: ["Trajna tkiva", "Tvorna (meristematska) tkiva", "≈Ωljezdana tkiva", "Potporna tkiva"],
      correctIndex: 1,
      xp: 10,
      explanation: "Tvorna tkiva imaju ƒáelije koje se stalno dijele i iz njih nastaju sva ostala tkiva."
    },
    {
      section: "Biljna tkiva",
      text: "Koja grupa tkiva nastaje iz tvornih tkiva i ne dijeli se vi≈°e stalno?",
      options: ["Trajna tkiva", "≈Ωivƒçana tkiva", "Mi≈°iƒána tkiva", "Probavna tkiva"],
      correctIndex: 0,
      xp: 10,
      explanation: "Trajna tkiva nastaju iz tvornih tkiva i obavljaju posebne uloge u biljci."
    },
    {
      section: "Provodno tkivo",
      text: "Koja je glavna uloga provodnog tkiva?",
      options: [
        "Da ≈°titi biljku od spoljne sredine",
        "Da skladi≈°ti rezerve hrane",
        "Da provodi vodu i mineralne materije, kao i organske materije kroz biljku",
        "Da privlaƒçi insekte mirisom"
      ],
      correctIndex: 2,
      xp: 12,
      explanation: "Provodno tkivo vodi vodu i mineralne materije od korijena ka listovima, a organske materije u suprotnom smjeru."
    },
    {
      section: "Pokrovno tkivo",
      text: "Koje tkivo ƒçini za≈°titni sloj ƒáelija koji pokriva spolja≈°nju povr≈°inu biljke?",
      options: ["Pokrovno tkivo", "Osnovno tkivo", "Potporno tkivo", "≈Ωljezdano tkivo"],
      correctIndex: 0,
      xp: 8,
      explanation: "Pokrovno tkivo obavija biljku i ≈°titi je od spolja≈°njih uticaja."
    },
    {
      section: "Osnovno tkivo",
      text: "Gdje se prete≈æno nalazi osnovno tkivo?",
      options: [
        "Samo u korijenu",
        "U unutra≈°njosti listova, stabla i korijena ‚Äì ispunjava veƒái dio biljke",
        "Samo u plodovima",
        "Samo u cvijetu"
      ],
      correctIndex: 1,
      xp: 8,
      explanation: "Osnovno tkivo ispunjava unutra≈°njost mnogih organa i ƒçini veƒáinu mase biljke."
    },
    {
      section: "Potporno i ≈æljezdano tkivo",
      text: "Koje tkivo daje ƒçvrstinu i elastiƒçnost biljkama?",
      options: ["Potporno (mehaniƒçko) tkivo", "Pokrovno tkivo", "≈Ωljezdano tkivo", "Tvorno tkivo"],
      correctIndex: 0,
      xp: 10,
      explanation: "Potporno ili mehaniƒçko tkivo izgraƒëeno je od ƒáelija koje biljkama daju ƒçvrstinu i otpornost."
    },
    {
      section: "Potporno i ≈æljezdano tkivo",
      text: "≈†ta je karakteristiƒçno za ≈æljezdano tkivo?",
      options: [
        "Provodi vodu",
        "Luƒçi razliƒçite materije poput nektara, eteriƒçnih ulja ili smole",
        "Skuplja sunƒçevu svjetlost",
        "Uƒçestvuje u fotosintezi"
      ],
      correctIndex: 1,
      xp: 10,
      explanation: "≈Ωljezdano tkivo luƒçi nektar, eteriƒçna ulja, smolu i druge supstance."
    },
    {
      section: "Biljni organi",
      text: "Koji biljni organi spadaju u vegetativne organe?",
      options: [
        "Cvijet, plod i sjeme",
        "Korijen, stablo i list",
        "Samo list",
        "Samo korijen"
      ],
      correctIndex: 1,
      xp: 12,
      explanation: "Vegetativni organi slu≈æe za ishranu i odr≈æavanje ≈æivota biljke ‚Äì to su korijen, stablo i list."
    },
    {
      section: "Biljni organi",
      text: "Koji organi spadaju u generativne (reproduktivne) organe biljke?",
      options: [
        "Korijen i stablo",
        "List i korijen",
        "Cvijet, plod i sjeme",
        "Samo cvijet"
      ],
      correctIndex: 2,
      xp: 12,
      explanation: "Generativni organi uƒçestvuju u razmno≈æavanju ‚Äì cvijet, plod i sjeme."
    },
    {
      section: "Korijen ‚Äì graƒëa",
      text: "Koja je osnovna uloga korijena?",
      options: [
        "Da vr≈°i fotosintezu umjesto lista",
        "Da priƒçvr≈°ƒáuje biljku za podlogu i usvaja vodu i mineralne materije",
        "Da stvara cvjetove",
        "Da ≈°titi biljku od hladnoƒáe"
      ],
      correctIndex: 1,
      xp: 12,
      explanation: "Korijen uƒçvr≈°ƒáuje biljku za podlogu i usvaja vodu i mineralne materije iz zemlji≈°ta."
    },
    {
      section: "Korijen ‚Äì graƒëa",
      text: "Kako se zove zona sitnih izdanaka koja poveƒáava povr≈°inu korijena i upija vodu?",
      options: [
        "Korjenova kapa",
        "Zona rasta",
        "Zona korjenovih dlaƒçica",
        "Kora stabla"
      ],
      correctIndex: 2,
      xp: 10,
      explanation: "Korjenove dlaƒçice poveƒáavaju povr≈°inu korijena i upijaju vodu i rastvorene mineralne materije."
    },
    {
      section: "Tipovi korijena",
      text: "Kako nazivamo korijen kod kojeg postoji jedan glavni korijen iz koga se granaju boƒçni korjenovi (npr. mrkva)?",
      options: [
        "≈Ωiliƒçast korijen",
        "Osovinski korijen",
        "Vazdu≈°ni korijen",
        "Adventivni korijen"
      ],
      correctIndex: 1,
      xp: 12,
      explanation: "Osovinski tip korijena ima glavni korijen iz koga se granaju boƒçni ‚Äì tipiƒçan za dvokotiledone biljke poput mrkve."
    },
    {
      section: "Tipovi korijena",
      text: "Koji je primjer ≈æiliƒçastog tipa korijena?",
      options: [
        "Mrkva",
        "Cvekla",
        "P≈°enica ili trava",
        "Repa"
      ],
      correctIndex: 2,
      xp: 12,
      explanation: "≈Ωiliƒçast korijen ima mnogo korjenova sliƒçne debljine ‚Äì tipiƒçan za trave, p≈°enicu, kukuruz."
    }
  ];

  const state = {
    current: 0,
    score: 0,
    xp: 0,
    hearts: 3,
    answered: false
  };

  const qText = document.getElementById('question-text');
  const optionsDiv = document.getElementById('options');
  const feedbackDiv = document.getElementById('feedback');
  const scoreSpan = document.getElementById('score');
  const xpSpan = document.getElementById('xp-value');
  const xpFill = document.getElementById('xp-fill');
  const qIndexSpan = document.getElementById('q-index');
  const qTotalSpan = document.getElementById('q-total');
  const sectionLabel = document.getElementById('section-label');
  const heartsDiv = document.getElementById('hearts');
  const nextBtn = document.getElementById('next-btn');
  const finalScreen = document.getElementById('final-screen');
  const finalScoreSpan = document.getElementById('final-score');
  const finalXpSpan = document.getElementById('final-xp');
  const finalMessage = document.getElementById('final-message');

  qTotalSpan.textContent = questions.length;

  function renderHearts() {
    let heartsHtml = '';
    for (let i = 0; i < 3; i++) {
      heartsHtml += `<span class="${i < state.hearts ? '' : 'heart-lost'}">‚ù§Ô∏è</span> `;
    }
    heartsDiv.innerHTML = heartsHtml;
  }

  function renderQuestion() {
    const q = questions[state.current];
    sectionLabel.textContent = `Tema: ${q.section}`;
    qText.textContent = q.text;
    qIndexSpan.textContent = state.current + 1;
    feedbackDiv.textContent = '';
    feedbackDiv.className = 'feedback';
    optionsDiv.innerHTML = '';
    nextBtn.disabled = true;
    state.answered = false;

    q.options.forEach((opt, index) => {
      const btn = document.createElement('button');
      btn.className = 'option-btn';
      btn.textContent = opt;
      btn.addEventListener('click', () => handleAnswer(index, btn));
      optionsDiv.appendChild(btn);
    });

    // update progress bar
    const progress = (state.current / questions.length) * 100;
    xpFill.style.width = `${progress}%`;
    xpSpan.textContent = state.xp;
    scoreSpan.textContent = state.score;
    renderHearts();
  }

  function handleAnswer(index, btn) {
    if (state.answered) return;
    const q = questions[state.current];
    state.answered = true;

    const optionButtons = document.querySelectorAll('.option-btn');
    optionButtons.forEach(b => b.classList.add('disabled'));

    if (index === q.correctIndex) {
      btn.classList.add('correct');
      feedbackDiv.textContent = 'Taƒçno! ' + q.explanation;
      feedbackDiv.classList.add('correct');
      const gainedXp = q.xp;
      state.score += 10;
      state.xp += gainedXp;
    } else {
      btn.classList.add('incorrect');
      optionButtons[q.correctIndex].classList.add('correct');
      feedbackDiv.textContent = 'Nije taƒçno. ' + q.explanation;
      feedbackDiv.classList.add('incorrect');
      state.hearts -= 1;
      if (state.hearts < 0) state.hearts = 0;
    }

    // update bars/hearts
    const progress = ((state.current + 1) / questions.length) * 100;
    xpFill.style.width = `${progress}%`;
    xpSpan.textContent = state.xp;
    scoreSpan.textContent = state.score;
    renderHearts();

    // enable next button
    nextBtn.disabled = false;

    // ako su sva srca izgubljena ‚Äì zavr≈°etak
    if (state.hearts === 0) {
      nextBtn.textContent = 'Prika≈æi rezultat';
    } else {
      nextBtn.textContent = state.current === questions.length - 1 ? 'Zavr≈°i igru' : 'Sljedeƒáe ‚ûú';
    }
  }

  function showFinalScreen() {
    const maxScore = questions.length * 10;
    finalScoreSpan.textContent = `${state.score} / ${maxScore}`;
    finalXpSpan.textContent = state.xp;

    let msg = '';
    const percent = (state.score / maxScore) * 100;
    if (percent === 100) {
      msg = 'Fenomenalno! Spreman/na si da objasni≈° svima kako funkcioni≈°u biljna tkiva i korijen.';
    } else if (percent >= 70) {
      msg = 'Odliƒçno znanje! Jo≈° malo vje≈æbe i biƒáe≈° pravi struƒçnjak za biljne organe.';
    } else if (percent >= 40) {
      msg = 'Dobar poƒçetak! Proƒëi jo≈° jednom kroz pitanja i probaj ponovo.';
    } else {
      msg = 'Treba jo≈° vje≈æbe, ali nema veze ‚Äì odigraj ponovo i biƒáe bolje svaki put!';
    }
    finalMessage.textContent = msg;

    finalScreen.style.display = 'block';
    finalScreen.scrollIntoView({ behavior: 'smooth' });
  }

  nextBtn.addEventListener('click', () => {
    if (state.hearts === 0 || state.current === questions.length - 1) {
      showFinalScreen();
    } else {
      state.current += 1;
      renderQuestion();
    }
  });

  function restartGame() {
    state.current = 0;
    state.score = 0;
    state.xp = 0;
    state.hearts = 3;
    state.answered = false;
    finalScreen.style.display = 'none';
    nextBtn.textContent = 'Sljedeƒáe ‚ûú';
    renderQuestion();
    document.querySelector('.game-card').scrollIntoView({ behavior: 'smooth' });
  }

  window.restartGame = restartGame;

  // inicijalno pokretanje
  renderQuestion();
</script>
</body>
</html>
